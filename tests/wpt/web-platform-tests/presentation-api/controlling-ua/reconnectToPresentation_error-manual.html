<!doctype html>
<meta charset="utf-8">
<title>Presentation API reconnect a presentation for Controlling User Agent (Error - manual test)</title>
<link rel="author" title="Franck William Taffo" href="http://www.fokus.fraunhofer.de">
<link rel="help" href="http://w3c.github.io/presentation-api/#dfn-controlling-user-agent">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script>

    /**
     *
     * Test if reconnect returns a NotFoundError() by wrong presentation ID
     */

    var client_id = String(new Date().getTime()) + String(Math.floor(Math.random() * 1e5));
    //relative presentation URL
    var presentation_url = "../receiving-ua/idlharness.html#__castAppId__=2334D33A/__castClientId__="+ client_id;
    var request = new PresentationRequest(presentation_url);
    var wrong_presentationId = null;

    var reconnect = function () {
        promise_test(function () {

            var presId = "presId";
            // presId is mandatory when reconnecting to a presentation.
                return request.reconnect(presId)
                        .then(function (setConnection) {
                            assert_unreached("reconnect should not return a Promise resolve by wrong presentation ID");
                        })
        }, "Check that the promise is rejected by wrong presentation Id");
    };

    setup({explicit_timeout: true})
</script>
<p>click on the button to the perfom the test</p>
<button id="reconnectBtn" onclick="reconnect()">Reconnect</button>
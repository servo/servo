<!DOCTYPE html>
<meta charset="utf-8">
<title>Test the sequence of events when reporting iframe timing.</title>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="resources/frame-timing.js"></script>
<script src="/common/utils.js"></script>
<script src="/common/get-host-info.sub.js"></script>
<body>
<script>
  test_frame_timing_before_load_event('iframe');

  const host_info = get_host_info();
  const types = ['ORIGIN', 'HTTP_REMOTE_ORIGIN', 'HTTP_NOTSAMESITE_ORIGIN'];
  for (const a of types) {
    for (const b of types) {
      for (const tao of [true, false]) {
        test_frame_timing_change_src('iframe', host_info[a], host_info[b], tao,
        `Changing the src of an iframe (${a}->${b}) ${tao ? "with" : "without"} TAO should result in an RT entry`);
      }
    }
  }
</script>
</body>

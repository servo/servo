<!DOCTYPE HTML>
<html>
<head>
    <title>Audio element src attribute must match src list - positive test</title>
    <script src='/resources/testharness.js'></script>
    <script src='/resources/testharnessreport.js'></script>
</head>
<body>
    <h1>Audio element src attribute must match src list - positive test</h1>
    <div id='log'></div>

  <script>
    var src_test = async_test("In-policy audio src");
    var source_test = async_test("In-policy audio source element");

    function media_loaded(t) {
      t.done();
    }

    function media_error_handler(t) {
      t.step( function () {
          assert_unreached("Media error handler should be triggered for non-allowed domain.");
      });
      t.done();
    }
  </script>

    <audio id="audioObject" width="320" height="240" controls
           onloadeddata="media_loaded(source_test)">
        <source id="audioSourceObject"
                type="audio/mpeg"
                onerror="media_error_handler(source_test)"
                src="/media/sound_5.mp3">
    </audio>
    <audio id="audioObject2" width="320" height="240" controls
           onerror="media_error_handler(src_test)"
           onloadeddata="media_loaded(src_test)"
           src="/media/sound_5.mp3">

  <script async defer src="../support/checkReport.sub.js?reportExists=false">
  </script>

</body>
</html>

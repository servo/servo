<!doctype html>
<html>
  <head>
    <title>getUserMedia: Non-Interactive test for mediaDevices APIs</title>
    <link rel="author" title="Dr Alex Gouaillard" href="mailto:agouaillard@gmail.com"/>
    <link rel="help" href="http://w3c.github.io/mediacapture-main/getusermedia.html#mediadevices">
    <link rel="help" href="http://w3c.github.io/mediacapture-main/getusermedia.html#mediadevices-interface-extensions">
    <meta name='assert' content='Check the mediaDevices APIs.'/>
  </head>
  <body>
    <h1 class="instructions">Description</h1>
    <p class="instructions">This test checks for the presence of the
    <code>navigator.mediaDevices.getUserMedia</code> method.</p>
    <div id='log'></div>
    <script src=/resources/testharness.js></script>
    <script src=/resources/testharnessreport.js></script>
    <script src=/resources/WebIDLParser.js></script>
    <script src=/resources/idlharness.js></script>
    <script>
      'use strict';

      promise_test(async () => {
        const main = await fetch('/interfaces/mediacapture-main.idl').then(r => r.text());
        const dom = await fetch('/interfaces/dom.idl').then(r => r.text());
        const html = await fetch('/interfaces/html.idl').then(r => r.text());

        var idl_array = new IdlArray();
        idl_array.add_idls(main);
        idl_array.add_dependency_idls(html);
        idl_array.add_dependency_idls(dom);
        idl_array.add_objects({
          Navigator: ["navigator"],
          MediaDevices: ["navigator.mediaDevices"]
        });
        idl_array.test();
      }, 'Test driver')
    </script>
  </body>
</html>

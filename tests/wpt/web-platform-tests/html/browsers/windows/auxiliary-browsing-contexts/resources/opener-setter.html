<!doctype html>
<meta charset="utf-8">
<html>
<p>This window should set the window.opener attribute</p>
<script src="/common/PrefixedLocalStorage.js"></script>
<script>
var prefixedLocalStorage = new PrefixedLocalStorageResource({
  close_on_cleanup: true
});
function checkOpener () {
  if (window.name == 'iShouldSetOpenerToNull') {
    var opener_ = window.opener;
    window.opener = null;
    return prefixedLocalStorage.setItem('openerIsNull', window.opener === null && opener === null);
  }
  if (window.name == 'iShouldSetOpenerToTest') {
    var opener_ = window.opener;
    window.opener = 'test';
    return prefixedLocalStorage.setItem('openerIsTest', window.opener === "test" && opener_ !== 'test');
  }
}
</script>
<body onload="checkOpener()">
</body>
</html>

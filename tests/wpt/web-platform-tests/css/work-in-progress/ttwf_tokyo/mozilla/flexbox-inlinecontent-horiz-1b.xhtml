<?xml version="1.0" encoding="UTF-8"?>
<!--
     Any copyright is dedicated to the Public Domain.
     http://creativecommons.org/publicdomain/zero/1.0/
-->
<!--
     This test inserts a new div into some inline content in a flex container.
     That should split the inline content into two flex items.
-->
<html xmlns="http://www.w3.org/1999/xhtml"
      class="reftest-wait">
  <head>
    <link rel="stylesheet" type="text/css" href="ahem.css" />
    <script>
      function tweak() {
        var flexbox = document.getElementsByClassName("flexbox")[0];
        var insertionPoint = flexbox.firstChild.nextSibling.nextSibling;

        var newDiv = document.createElement("div");
        newDiv.setAttribute("class", "b");

        flexbox.insertBefore(newDiv, insertionPoint);

        document.documentElement.removeAttribute("class");
      }

      window.addEventListener("MozReftestInvalidate", tweak, false);
    </script>
    <style>
      div { height: 100px; }
      div.flexbox {
        font: 10px Ahem;
        width: 200px;
        display: flex;
      }
      div.a {
        flex: 1 0 20px;
        background: lightgreen;
      }
      div.b {
        flex: 2 0 30px;
        background: yellow;
      }
      div.inflex {
        flex: 0 0 20px;
        background: gray;
      }
    </style>
  </head>
  <body>
    <div class="flexbox"
       ><div class="a"/>text<i>italic</i
       ><div class="inflex"/></div>
  </body>
</html>

<!DOCTYPE html>
<link rel="help" href="https://drafts.csswg.org/css-pseudo-4/#first-line-pseudo">
<link rel="match" href="first-line-with-out-of-flow-ref.html">
<style>
  #block::first-line { color: green; }
</style>
<div id="block">
  <div style="position: absolute"><br></div>
  <div style="float: right"><br></div>
  <div>
    <div style="position: absolute"><br></div>
    <div style="float: right"><br></div>
    <div style="color: blue">
      <div>
        <span><span>This text should be green.</span></span><br>
        This text should be blue.
      </div>
    </div>
  </div>
</div>

<!DOCTYPE html>
<script src="/resources/testharness.js"></script>
<script src="/webauthn/helpers.js"></script>
<script src="/resources/testdriver.js"></script>
<script src="/resources/testdriver-vendor.js"></script>
<script src="/common/get-host-info.sub.js"></script>
<script src="utils.js"></script>
<title>Fenced frame content to report the result of navigator.credentials.create</title>

<body>
<script>
function base_path() {
  return location.pathname.replace(/\/[^\/]*$/, '/');
}

standardSetup(function() {
  'use strict';
  async function init() {
    // This file is meant to be navigated to from a <fencedframe> element. It
    // reports back to the page hosting the <fencedframe> whether or not
    // `navigator.credentials.create` is allowed.
    const [key] = parseKeylist();

    // Report whether or not `credentials.create` is allowed.
    createCredential().then(
        () => {
          writeValueToServer(key, 'createCredential passed');
        },
        () => {
          writeValueToServer(key, 'createCredential failed');
        },
    );
  }

  init();
});
</script>
</body>

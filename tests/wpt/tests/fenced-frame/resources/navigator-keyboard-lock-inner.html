<!DOCTYPE html>
<script src="utils.js"></script>
<title>Fenced frame content to report the value of navigator.keyboard.lock</title>

<body>
<script>
async function init() { // Needed in order to use top-level await.
  // This file is meant to be navigated to from a <fencedframe> element. It
  // reports back to the page hosting the <fencedframe> whether or not
  // `keyboard.lock` is allowed.
  const [keyboard_lock_key] = parseKeylist();
  // Report whether or not `navigator.keyboard.lock()` is allowed.
  navigator.keyboard.lock().then(
    () => { writeValueToServer(keyboard_lock_key, "resolved"); },
    () => { writeValueToServer(keyboard_lock_key, "rejected");},
  );
}

init();
</script>
</body>

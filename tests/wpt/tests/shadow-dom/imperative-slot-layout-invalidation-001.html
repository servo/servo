<!doctype html>
<meta charset="utf-8">
<title>Imperative slotting API: Invalidation on re-assignment</title>
<link rel=help href="https://bugzilla.mozilla.org/show_bug.cgi?id=1752694">
<link rel=match href="imperative-slot-layout-invalidation-001-ref.html">
<link rel=author href="mailto:emilio@crisal.io" title="Emilio Cobos Álvarez">
<link rel=author href="https://mozilla.org" title="Mozilla">
<div id="host">
  <span>one</span>
</div>
<script>
  let host = document.getElementById("host");

  function assignFirstChild() {
    host.shadowRoot.querySelector("slot").assign(host.firstElementChild);
  }

  host.attachShadow({ mode: "open", slotAssignment: "manual" }).innerHTML = "<slot>Fallback</slot>";

  assignFirstChild();

  host.getBoundingClientRect();

  host.insertAdjacentHTML("afterbegin", "<span>two</span>");

  assignFirstChild();
</script>

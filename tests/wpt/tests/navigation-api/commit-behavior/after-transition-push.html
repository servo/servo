<!doctype html>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="../navigation-methods/return-value/resources/helpers.js"></script>
<script src="resources/after-transition-commit-helpers.js"></script>
<body>
<script>
let tests = [
  { mode: "rejectBeforeCommit",      description: "{ commit: 'after-transition' } for a push navigation, reject before commit" },
  { mode: "rejectAfterCommit",       description: "{ commit: 'after-transition' } for a push navigation, reject after commit" },
  { mode: "successExplicitCommit",   description: "{ commit: 'after-transition' } for a push navigation, explicit commit()" },
  { mode: "successNoExplicitCommit", description: "{ commit: 'after-transition' } for a push navigation, commit when handler resolves" }
];

let onload_promise = new Promise(resolve => window.onload = resolve);
for (let test of tests) {
  promise_test(async t => {
    await onload_promise;
    await testAfterTransitionCommit(t, "push", test.mode);
  }, test.description);
}
</script>
</body>

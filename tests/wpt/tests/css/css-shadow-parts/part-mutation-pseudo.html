<!doctype html>
<meta charset="utf-8">
<title>CSS Shadow Parts - Invalidation Change Part Name on pseudo</title>
<link rel="help" href="https://drafts.csswg.org/css-shadow-parts/">
<link rel="author" href="mailto:emilio@crisal.io" title="Emilio Cobos Ãlvarez">
<link rel="author" href="https://mozilla.org" title="Mozilla">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="support/shadow-helper.js"></script>
<style>#c-e::part(partp)::before { color: red; }</style>
<script>installCustomElement("custom-element", "custom-element-template");</script>
<template id="custom-element-template">
  <style>span::before { content: ""; color: green; }</style>
  <span id="part" part="partp">This text</span>
</template>
The following text should be green:
<div><custom-element id="c-e"></custom-element></div>
<script>
  "use strict";
  test(function() {
    const part = getElementByShadowIds(document, ["c-e", "part"]);
    const before = getComputedStyle(part, "::before").color;
    part.setAttribute("part", "somethingelse");
    const after = getComputedStyle(part, "::before").color;
    assert_not_equals(before, after);
  }, "Part in selected host changed color");
</script>

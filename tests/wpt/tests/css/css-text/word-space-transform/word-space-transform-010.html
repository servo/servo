<!DOCTYPE html>
<meta charset="utf-8">
<title>CSS Text level 4 Test: word-space-transform and forced line breaks</title>
<link rel="author" title="Florian Rivoal" href="http://florian.rivoal.net/">
<link rel="help" href="https://drafts.csswg.org/css-text-4/#word-space-transform">
<link rel="match" href="reference/word-space-transform-010-ref.html">
<meta name="assert" content="must not replace instances of U+200B immediately preceding or following a forced line break (ignoring any intervening inline box boundaries, and associated margin/border/padding)">
<style>
div {
  font-size: 2em;
  border: solid blue;
  float: left;
  margin: 1px;
}
.pad { padding: 0 1em; }
.spad { padding: 0 0.5em; }
.margin { margin: 0 1em; }
.smargin { margin: 0 0.5em; }
.border {  border: solid transparent; border-width: 0 1em; }
.sborder { border: solid transparent; border-width: 0 0.5em; }
.test {
  word-space-transform: ideographic-space;
}
</style>

<p>Test passes if the all boxes below are identical.

<div class="test pad"><wbr>あ<wbr>い<wbr></div>
<div class="test pad">&#x200B;あ&#x200B;い&#x200B;</div>
<div class="test pad"><span><wbr>あ<wbr>い<wbr><span></div>
<div class="test pad"><span>&#x200B;あ&#x200B;い&#x200B;</span></div>
<div class="test pad"><span></span><wbr>あ<wbr>い<wbr><span></span></div>
<div class="test pad"><span></span>&#x200B;あ&#x200B;い&#x200B;<span></span></div>

<div class="test"><span class=pad><wbr>あ<wbr>い<wbr><span></div>
<div class="test"><span class=pad>&#x200B;あ&#x200B;い&#x200B;</span></div>
<div class="test"><span class=spad></span><wbr>あ<wbr>い<wbr><span class=spad></span></div>
<div class="test"><span class=spad></span>&#x200B;あ&#x200B;い&#x200B;<span class=spad></span></div>

<div class="test"><span class=margin><wbr>あ<wbr>い<wbr><span></div>
<div class="test"><span class=margin>&#x200B;あ&#x200B;い&#x200B;</span></div>
<div class="test"><span class=smargin></span><wbr>あ<wbr>い<wbr><span class=smargin></span></div>
<div class="test"><span class=smargin></span>&#x200B;あ&#x200B;い&#x200B;<span class=smargin></span></div>

<div class="test"><span class=border><wbr>あ<wbr>い<wbr><span></div>
<div class="test"><span class=border>&#x200B;あ&#x200B;い&#x200B;</span></div>
<div class="test"><span class=sborder></span><wbr>あ<wbr>い<wbr><span class=sborder></span></div>
<div class="test"><span class=sborder></span>&#x200B;あ&#x200B;い&#x200B;<span class=sborder></span></div>

<div id=ref class=pad>あ　い</div>

<!DOCTYPE html>
<meta charset="utf-8">
<title>CSS Text Level 3: glyphs can only hang at the edge of a line</title>
<link rel="author" title="Andreu Botella" href="mailto:abotella@igalia.com">
<link rel="help" href="https://drafts.csswg.org/css-text-3/#hanging">
<link rel="help" href="https://drafts.csswg.org/css-text-3/#white-space-phase-2">
<link rel="match" href="/css/reference/ref-filled-green-100px-square.xht">
<link rel="stylesheet" type="text/css" href="/fonts/ahem.css" />
<meta name="assert" content="Glyphs can't hang at the end of the line if there are non-hanging glyphs after them in the line">

<style>
  div {
    font: 25px/1 Ahem;
    width: 5ch;
    height: 4ch;
    margin-left: -1ch;
    background:
      linear-gradient(red, red) 1ch 0 / 4ch 1ch no-repeat,
      linear-gradient(green, green) 1ch 0 / 4ch 4ch no-repeat;

    text-align: right;
    white-space: normal;
  }
  span {
    color: transparent;
    background: green;
  }
  .break-spaces {
    white-space: break-spaces;
  }
</style>

<p>Test passes if there is a filled green square and <strong>no red</strong>.</p>

<div><span>X&#x3000;&#x3000;</span><span class="break-spaces"> </span></div>

<!--
  With white-space: normal, ideographic spaces (U+3000) are preserved but do
  hang. But here they are followed by spaces with white-space: break-spaces,
  which are preserved and never hang. Since only glyphs at the edge of a line
  can hang, this prevents the ideographic spaces from hanging.
-->

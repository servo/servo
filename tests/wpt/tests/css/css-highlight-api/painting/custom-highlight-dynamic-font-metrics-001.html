<!DOCTYPE html>
<meta charset="UTF-8">
<title>CSS Highlight API Test: </title>
<link rel="help" href="https://drafts.csswg.org/css-highlight-api-1/">
<link rel="help" href="https://drafts.csswg.org/css-pseudo/#highlight-styling">
<link rel="match" href="custom-highlight-font-metrics-001-ref.html">
<meta name="assert" value="fonts relative units take the correct values, with correct cascade">
<meta name="fuzzy" content="0-80;0-4">
<head>
  <style>
    :root {
      font-size: 8px;
    }
    div {
      margin: 50px;
      font-size: 10px;
    }
    ::highlight(highlight1) {
      text-underline-offset: 0.5em;
      text-decoration-line: underline;
      text-decoration-color: green;
      text-decoration-thickness: 0.25rem;
    }
  </style>
</head>
<body>
  <div id="h1">Font relative units with 40px font</div>
  <div id="h2">Font relative units with 20px font</div>
  <script>
    let r1 = new Range();
    r1.setStart(h1, 0);
    r1.setEnd(h1, 1);
    let r2 = new Range();
    r2.setStart(h2, 0);
    r2.setEnd(h2, 1);
    CSS.highlights.set("highlight1", new Highlight(r1, r2));
    requestAnimationFrame(() => {
      requestAnimationFrame(() => {
        h1.style.fontSize = '40px';
        h2.style.fontSize = '20px';
        document.documentElement.style.fontSize = '16px';
        requestAnimationFrame(() => takeScreenshot());
      });
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<meta name="assert" content="Test inserting an inline child before an OOF in blocks-in-inline">
<link rel="help" href="http://www.w3.org/TR/CSS21/visuren.html#anonymous-block-level">
<link ref="match" href="block-in-inline-insert-020-ref.html">
<link rel="author" title="Koji Ishii" href="mailto:kojii@chromium.org">
<body>
  <section>
    <span>
      <div>1</div>
      <div class="before" style="position: absolute">3</div>
      <div>&nbsp;</div>
    </span>
  </section>
  <!-- The OOF was inserted dynamically -->
  <section>
    <span>
      <div>1</div>
      <div class="beforeoof">&nbsp;</div>
    </span>
  </section>
<script>
(function () {
  document.body.offsetTop;
  for (const before of document.getElementsByClassName('beforeoof')) {
    const oof = document.createElement('div');
    oof.classList.add('before')
    oof.style.position = 'absolute';
    oof.textContent = '3';
    before.before(oof);
  }

  document.body.offsetTop;
  for (const before of document.getElementsByClassName('before')) {
    const span = document.createElement('span');
    span.textContent = '2';
    before.before(span);
  }
})();
</script>
</body>

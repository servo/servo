<!DOCTYPE HTML>
<html><head>
<link rel="author" title="Mats Palmgren" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1140160">
<link rel="help" href="https://drafts.csswg.org/css-display/#box-generation">
<link rel="help" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1140160">
<link rel="match" href="display-contents-fieldset-002-ref.html">
<style>
fieldset { padding:0; }
span { display:block; width:10px; height:10px; background:lime; }
.contents { display: contents; }
legend { border: 1px solid; }
.test2 legend { display:contents; }
.test2 legend::after, .test3 legend::after { content:"legend"; }
.test2 legend.static, .test3 legend.static { display:block; }
.test2 legend.static::before, .test3 legend.static::before { content:"static "; }
.after::after { content:"::after"; }
.before::before { content:"::before"; }
</style>
</head>
<body>
<fieldset><div class="test contents"></div></fieldset>
<fieldset><div class="test contents">x</div></fieldset>
<fieldset><div class="test contents after"></div></fieldset>
<fieldset><div class="test contents before"></div></fieldset>
<fieldset><div class="test contents before after"></div></fieldset>
<fieldset><legend class="test contents"></legend></fieldset>
<fieldset><div class="contents"><legend class="test contents"></legend></div></fieldset>
<fieldset><legend class="contents"><div class="test contents"></div></legend></fieldset>
<fieldset class="test2"></fieldset>
<fieldset class="test2 after"></fieldset>
<fieldset class="test2"><legend class="static"></legend></fieldset>
<fieldset class="test2"><legend class="static contents"></legend></fieldset>
<fieldset class="test2"><div class="contents"><legend class="static"></legend></div></fieldset>
<fieldset><div class="test2 contents"></div></fieldset>
<fieldset><div class="test3 contents"></div></fieldset>
<fieldset><div class="test2 contents"><legend class="static"></legend></div></fieldset>
<fieldset><div class="test3 contents"><legend class="static"></legend></div></fieldset>
<script>
document.body.offsetHeight;
var tests = document.querySelectorAll('.test');
for (i=0; i < tests.length; ++i) {
  test = tests[i];
  test.appendChild(document.createElement('span'));
}
var tests = document.querySelectorAll('.test2,.test3');
for (i=0; i < tests.length; ++i) {
  test = tests[i];
  test.appendChild(document.createElement('legend'));
}
</script>
</body>
</html>

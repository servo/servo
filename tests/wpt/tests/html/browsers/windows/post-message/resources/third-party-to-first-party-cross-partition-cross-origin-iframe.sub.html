<!doctype html>
<meta charset=utf-8>
<body>
<script>
// Step 4 (html/browsers/windows/post-message/third-party-to-first-party-cross-partition-cross-origin.sub.html)
let site2Window;
const listener = e => {
  if (e.data === "Site 3 Window") {
    site2Window.close();
    window.top.postMessage("Site 2 Frame", "*");
  }
};
// Step 2 (html/browsers/windows/post-message/third-party-to-first-party-cross-partition-cross-origin.sub.html)
window.addEventListener("message", listener);
site2Window = window.open("https://{{hosts[alt][]}}:{{ports[https][0]}}/html/browsers/windows/post-message/resources/third-party-to-first-party-cross-partition-cross-origin-window.https.html", "", "noopener=false");
</script>
</body>

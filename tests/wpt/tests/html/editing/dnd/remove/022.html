<!doctype html>
<title>Removing drop targetted document before the queue is processed</title>
<style>
  span, iframe {
    height: 200px;
    width: 200px;
    background-color: orange;
    display: inline-block;
    border: none;
  }
</style>
<script type="text/javascript">
window.onload = function () {
  var orange = document.getElementsByTagName('span')[0];
  orange.ondragstart = function (e) {
    e.dataTransfer.setData('text','dummy text');
    e.dataTransfer.effectAllowed = 'all';
    document.getElementsByTagName('iframe')[0].contentWindow.postMessage('dummy message','*');
    setTimeout(function () {
      document.getElementsByTagName('p')[0].removeChild(document.getElementsByTagName('iframe')[0]);
    },4000);
  };
};
</script>
<p><span draggable="true"></span> <iframe height="200" width="200" src="022-1.html"></iframe></p>

<p>Drag the orange square over the blue square, then release it. Wait 5 seconds for the blue square to disappear. Pass if you can select this text.</li>
<noscript><p>Enable JavaScript and reload</p></noscript>

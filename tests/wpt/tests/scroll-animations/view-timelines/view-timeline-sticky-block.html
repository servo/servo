<!DOCTYPE html>
<html id="top">
<head>
<meta charset="utf-8">
<title>View timeline with sticky</title>
<link rel="help" href="https://drafts.csswg.org/scroll-animations-1/#viewtimeline-interface">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="/web-animations/testcommon.js"></script>
<script src="/scroll-animations/scroll-timelines/testcommon.js"></script>
<script src="/scroll-animations/view-timelines/testcommon.js"></script>
<style>

#container {
  height: 500px;
  overflow: auto;
}
.space {
  height: 500px;
}
#targetp {
  background: yellow;
  position: sticky;
  top: 0px;
  bottom: 0px;
  height: 50px;
}
#target {
  height: 50px;
}

</style>
</head>
<body>
<div id="container">
  <div class="space"></div>
  <div class="space">
    <div style="height: 200px"></div>
    <div id="targetp">
      <div id="target">Subject</div>
    </div>
  </div>
  <div class="space"></div>
</div>
<script type="text/javascript">

promise_test(async t => {
  await runTimelineRangeTest(t, {
    rangeStart: { rangeName: 'cover', offset: CSS.percent(0) } ,
    rangeEnd: { rangeName: 'cover', offset: CSS.percent(100) },
    startOffset: 0,
    endOffset: 1000,
    axis: 'block'
  });
  await runTimelineRangeTest(t, {
    rangeStart: { rangeName: 'contain', offset: CSS.percent(0) } ,
    rangeEnd: { rangeName: 'contain', offset: CSS.percent(100) },
    startOffset: 50,
    endOffset: 950,
    axis: 'block'
  });
  await runTimelineRangeTest(t, {
    rangeStart: { rangeName: 'entry', offset: CSS.percent(0) },
    rangeEnd: { rangeName: 'entry', offset: CSS.percent(100) },
    startOffset: 0,
    endOffset: 50,
    axis: 'block'
  });
  await runTimelineRangeTest(t, {
    rangeStart: { rangeName: 'entry-crossing', offset: CSS.percent(0) },
    rangeEnd: { rangeName: 'entry-crossing', offset: CSS.percent(100) },
    startOffset: 0,
    endOffset: 50,
    axis: 'block'
  });
  await runTimelineRangeTest(t, {
    rangeStart:  { rangeName: 'exit', offset: CSS.percent(0) },
    rangeEnd: { rangeName: 'exit', offset: CSS.percent(100) },
    startOffset: 950,
    endOffset: 1000,
    axis: 'block'
  });
  await runTimelineRangeTest(t, {
    rangeStart:  { rangeName: 'exit-crossing', offset: CSS.percent(0) },
    rangeEnd: { rangeName: 'exit-crossing', offset: CSS.percent(100) },
    startOffset: 950,
    endOffset: 1000,
    axis: 'block'
  });
}, 'View timeline with sticky target, block axis.' );

</script>
</body>
</html>

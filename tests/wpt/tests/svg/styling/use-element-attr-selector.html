<!DOCTYPE html>
<html class="reftest-wait">
<title>SVG Test: Attribute change in template affects attribute selector matching in &lt;use&gt; element tree</title>
<link rel="help" href="https://svgwg.org/svg2-draft/struct.html#UseElement">
<link rel="match" href="use-element-selector-ref.html">
<style>
  [attr] > #rect { fill: green; }
</style>
<svg>
  <use id="use_elm" xlink:href="#tmpl" />
  <defs>
    <g id="tmpl">
      <rect id="rect" width="100" height="100"></rect>
    </g>
  </defs>
</svg>
<script>
  requestAnimationFrame(() => {
    requestAnimationFrame(() => {
      tmpl.setAttribute("attr", "val");
      document.documentElement.classList.remove('reftest-wait');
    });
  });
</script>

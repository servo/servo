<!DOCTYPE HTML>
<html>
<head>
  <title>Test that reports using the report-api service are not sent when there's not validation</title>
  <script src='/resources/testharness.js'></script>
  <script src='/resources/testharnessreport.js'></script>
</head>
<body>
  <script>
    var t1 = async_test("Test that image loads");
    window.addEventListener("securitypolicyviolation",
         t1.unreached_func("Should not have triggered a violation event"));
  </script>
  <img src='/content-security-policy/support/pass.png'
       onload='t1.done();'
       onerror='t1.unreached_func("The image should have loaded");'>

  <script async defer src='../support/checkReport.sub.js?reportExists=false'></script>
</body>
</html>

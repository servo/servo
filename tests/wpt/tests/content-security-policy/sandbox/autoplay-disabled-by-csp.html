<!DOCTYPE html>
<html>
  <head>
  <link rel="help" href="https://html.spec.whatwg.org/multipage/#eligible-for-autoplay" />
  <title>Test that autoplay is blocked by a document's active sandboxing flags</title>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
  <script src="/common/media.js"></script>
  </head>
  <body>
    <video id="v" autoplay></video>
    <script>
      async_test((t) => {
        var v = document.getElementById('v')

        v.addEventListener('playing', t.unreached_func('video should not autoplay due to sandboxing flags'));

        v.src = getVideoURI('/media/movie_5') + '?' + new Date() + Math.random()
        t.step_timeout(() => t.done(), 500);
      }, 'csp-derived sandboxing flags prevent autoplay.')
    </script>
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>WebShare Test: policy is listed</title>
    <link rel="help" href="https://w3c.github.io/web-share/#permissions-policy">
    <script src="/resources/testharness.js"></script>
    <script src="/resources/testharnessreport.js"></script>
  </head>
  <body>
    <script>
      'use strict';

      test(() => {
        assert_true("permissionsPolicy" in document, "permissionsPolicy is implemented");
        assert_true(document.permissionsPolicy.allowsFeature('web-share'));
      }, 'allowsFeature() returns true for web-share');

      test(() => {
        assert_true("permissionsPolicy" in document, "permissionsPolicy is implemented");
        assert_true(document.permissionsPolicy.features().includes('web-share'));
      }, 'features() includes web-share');

      test(() => {
        assert_true("permissionsPolicy" in document, "permissionsPolicy is implemented");
        assert_true(document.permissionsPolicy.allowedFeatures().includes('web-share'));
      }, 'allowedFeatures() includes web-share');

      test(() => {
        assert_true("permissionsPolicy" in document, "permissionsPolicy is implemented");
        assert_equals(Array.from(document.permissionsPolicy.getAllowlistForFeature('web-share')).length, 1);
      }, 'allowsFeature() returns a single entry for web-share');
    </script>
  </body>
</html>

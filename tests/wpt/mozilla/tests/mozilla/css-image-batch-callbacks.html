<!doctype html>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<style>
  .file_icon:before {
content: url('data:image/gif;base64,R0lGODlhEgAWAKIAAP///8z//5mZmTMzMwAAAAAAAAAAAAAAACH5BAEAAAEALAAAAAASABYAQANHOLq88W+ASSsVmEjLr+7UNg2BCFaCNmBs6w7fuZHRCRB4Htueyac+G9AmodVkoSNIw4QFOa0dDzCcTqpW7FT7k3YfurCYkAAAOw==');
}
</style>
<div id="content"></div>
<script>
  async_test(t => {
      let content = document.querySelector('#content');
      for (let i = 0; i < 1000; i++) {
          let elem = document.createElement("div");
          elem.className = "file_icon"
          content.appendChild(elem);
      }
      let elem = document.createElement("img");
      elem.src = 'data:image/gif;base64,R0lGODlhEgAWAKIAAP///8z//5mZmTMzMwAAAAAAAAAAAAAAACH5BAEAAAEALAAAAAASABYAQANHOLq88W+ASSsVmEjLr+7UNg2BCFaCNmBs6w7fuZHRCRB4Htueyac+G9AmodVkoSNIw4QFOa0dDzCcTqpW7FT7k3YfurCYkAAAOw==';
      elem.onload = t.step_func_done();
  }, "Large numbers of CSS images do not prevent other async tasks from executing");
</script>

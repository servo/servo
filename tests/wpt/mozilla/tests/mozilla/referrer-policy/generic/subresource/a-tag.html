<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    <a id="button">go</a>
    <script>
      var url = new URL(window.location.toString());
      var id = url.searchParams.get("id");
      var redirection = url.searchParams.get("redirection");
      var cache_destroyer = url.searchParams.get("cache_destroyer");
      var tag_attrs = url.searchParams.get("tagAttrs");

      console.log(id);
      console.log(redirection);
      console.log(cache_destroyer);
      console.log(tag_attrs);

      var referrer_policy;
      try {
        referrer_policy = JSON.parse(tag_attrs);  
      } catch(e) {
        referrer_policy = {};
      }

      var a = document.getElementById("button");
      a.href = "/_mozilla/mozilla/referrer-policy/generic/subresource/document.py?id=" + id + "&redirection=" + redirection +
               "&cache_destroyer=" + cache_destroyer;

      for (var attr in referrer_policy) {
        a[attr] = referrer_policy[attr];
      }

      a.click();
    </script>
  </body>
</html>

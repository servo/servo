<html>
  <head>
    <script src="/resources/testharness.js"></script>
    <script src="/resources/testharnessreport.js"></script>
  </head>
  <body>
    <script>
    async_test(function(test) {
        // couldn't reproduce this behaviour without iframe
        var iframe = document.createElement('iframe');
        window.addEventListener('test_done', function() {
            // if event invalidation is not properly implemented
            // servo will crash during a short period of time
            setTimeout(() => test.done(), 50);
        }, false);
        iframe.src = 'timer_eventInvalidation_test.html';
        document.body.appendChild(iframe);
    });
    </script>
  </body>
</html>

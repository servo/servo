<!DOCTYPE html>
<html>
  <head>
    <title>Document.createElementNS() test</title>
    <script>
      function test() {
        var host = document.getElementById("body");
        function appendElt(e, id) {
          host.appendChild(e);
          e.id = id;
          e.setAttribute("ns", e.namespaceURI);
        }

        var img1 = document.createElement("address");
        appendElt(img1, "img1");
        var img2 = document.createElementNS("http://www.example.org/dummy", "p");
        appendElt(img2, "img2");
        var img3 = document.createElementNS("http://www.w3.org/1999/xhtml", "address");
        appendElt(img3, "img3");

        function appendSpan(id, ns) {
          var e = document.createElement("span");
          e.id = id;
          e.setAttribute("ns", ns);
          host.appendChild(e);
        }
        var ref = document.getElementById("ref");
        appendSpan("s1", ref.firstChild.namespaceURI);
        appendSpan("s2", ref.ownerDocument.namespaceURI);
        appendSpan("s3", ref.lastChild.namespaceURI);
     }
    </script>
    <style>
      @namespace dummy url("http://www.example.org/dummy");
      @namespace html url("http://www.w3.org/1999/xhtml");

      * { margin: 0px; padding: 0px; }

      address, dummy|p, p, html|span {
        width: 40px;
        height: 40px;
        background: red;
        margin-bottom: 10px;
        display: block;
      }

      address[ns="http://www.w3.org/1999/xhtml"],
      dummy|p[ns="http://www.example.org/dummy"],
      span[ns="null"] {
        background: green;
      }
    </style>
  </head>
  <body id="body">
    <div id="ref"> <!--comment--></div>
    <script>
      test();
    </script>
  </body>
</html>
